
local function printUsage()
	print( "Something went wrong..." )
end

local tArgs = { ... }
if #tArgs < 2 then
	printUsage()
  	return
end

if not http then
	print( "Pastebin requires http API" )
	print( "Set enableAPI_http to true in ComputerCraft.cfg" )
	return
end
	
	-- Download a file from pastebin.com
	if #tArgs < 2 then
		printUsage()
		return
	end

	-- Determine file to download
	local sCode = tArgs[1]
	local sFile = tArgs[2]
	local sPath = shell.resolve( sFile )
	if fs.exists( sPath ) then
		print("Something went wrong...")
		print( "File already exists" )
		return
	end 
	
	-- GET the contents from pastebin
	local response = http.get(
		"http://pastebin.com/raw.php?i="..textutils.urlEncode( sCode )
		)
		
	if response then
		
		local sResponse = response.readAll()
		response.close()
		
		local file = fs.open( sPath, "w" )
		file.write( sResponse )
		file.close()
		
	else
		print( "Something went wrong..." )
	end